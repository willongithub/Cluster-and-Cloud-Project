<!--Group 30
Surnames Names Student IDs
Wu Chongchong 720722
Wu Siqi 750892
Zhao Danni 756200
Yang Chao 795047
Li Hanchen 807363 -->
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <meta name="description" content="">
    <meta name="author" content="">
    <link rel="icon" href="favicon.ico">
    <link rel="stylesheet" href="buttons.css">

    <title>Comp 90024 Cluster and Cloud Computing</title>

    <!-- Bootstrap core CSS -->
    <link href="dist/css/bootstrap.min.css" rel="stylesheet">

    <!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
    <link href="assets/css/ie10-viewport-bug-workaround.css" rel="stylesheet">

    <!-- Just for debugging purposes. Don't actually copy these 2 lines! -->
    <!--[if lt IE 9]><script src="../../assets/js/ie8-responsive-file-warning.js"></script><![endif]-->
    <script src="assets/js/ie-emulation-modes-warning.js"></script>

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->

    <!-- Custom styles for this template -->
    <link href="carousel.css" rel="stylesheet">

    <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" /> 
    
    <script type="text/javascript" src="http://canvasjs.com/assets/script/canvasjs.min.js"></script>

    <script type="text/javascript"
      src="http://maps.googleapis.com/maps/api/js?key=AIzaSyDXNvQ7mrs3TMLUWG6GipPadaF6WazBP7A&sensor=false">
    </script>

    <style type="text/css">
.side-bar a,.chat-tips i {background: url(right_bg.png) no-repeat;}
.side-bar {width: 66px;position: fixed;bottom: 20px;right: 25px;font-size: 0;line-height: 0;z-index: 100;}
.side-bar a {width: 66px;height: 66px;display: inline-block;background-color: #ddd;margin-bottom: 2px;}
.side-bar a:hover {background-color: #669fdd;}
.side-bar .icon-qq {background-position: 0 -62px;}
.side-bar .icon-chat {background-position: 0 -130px;position: relative;}
.side-bar .icon-chat:hover .chat-tips {display: block;}
.side-bar .icon-blog {background-position: 0 -198px;}
.side-bar .icon-mail {background-position: 0 -266px;}
.side-bar .icon-totop {background-position: 0 -334px;}
.chat-tips {padding: 20px;border: 1px solid #d1d2d6;position: absolute;right: 78px;top: -55px;background-color: #fff;display: none;}
.chat-tips i {width: 9px;height: 16px;display: inline-block;position: absolute;right: -9px;top: 80px;background-position:-88px -350px;}
.chat-tips img {width: 138px;height: 138px;}
</style>

    <script type="text/javascript">
var map;
var index = 0;
var suicide = new Array();
function initialize(obj) 
{
if (obj != null) {
    //var myOptions = {center: new google.maps.LatLng(-37.8108, 144.9631),
    var myOptions = {center: new google.maps.LatLng(obj.tweets[0].coordinates[1], obj.tweets[0].coordinates[0]),
    zoom: 9,
    mapTypeId: google.maps.MapTypeId.ROADMAP
    };
    map = new google.maps.Map(document.getElementById("map_canvas"),myOptions);
    for(var i = 0; i < obj.tweets.length; i++)
            {
                var coordinates = object.tweets[i].coordinates;
                addMarker(coordinates[1],coordinates[0],object.tweets[i].score);
                marker.setMap(map);
            }
            chart();
            piechart();
}
else{
    var myOptions = {center: new google.maps.LatLng(-37.8108, 144.9631),
    zoom: 3,
    mapTypeId: google.maps.MapTypeId.ROADMAP
    };
    map = new google.maps.Map(document.getElementById("map_canvas"),myOptions); 
}
}

function test()
{
  var myOptions = {center: new google.maps.LatLng(-37.8108, 144.9631),
    zoom: 3,
    mapTypeId: google.maps.MapTypeId.ROADMAP
    };
    map = new google.maps.Map(document.getElementById("map_canvas"),myOptions); 
    creatXmlHttp();
    xhr.onreadystatechange = addor;
    xhr.open("GET", "http://115.146.93.176:8848/?city=syd&search=suicide", false);
    xhr.send(null);
    creatXmlHttp();
    xhr.onreadystatechange = addor;
    xhr.open("GET", "http://115.146.93.176:8848/?city=mel&search=suicide", false);
    xhr.send(null);
    creatXmlHttp();
    xhr.onreadystatechange = addor;
    xhr.open("GET", "http://115.146.93.176:8848/?city=bri&search=suicide", false);
    xhr.send(null);
    creatXmlHttp();
    xhr.onreadystatechange = addor;
    xhr.open("GET", "http://115.146.93.176:8848/?city=hbt&search=suicide", false);
    xhr.send(null);
    creatXmlHttp();
    xhr.onreadystatechange = addor;
    xhr.open("GET", "http://115.146.93.176:8848/?city=adl&search=suicide", false);
    xhr.send(null);
    creatXmlHttp();
    xhr.onreadystatechange = addor;
    xhr.open("GET", "http://115.146.93.176:8848/?city=mel&ratio=yes", false);
    xhr.send(null);
    creatXmlHttp();
    xhr.onreadystatechange = addor;
    xhr.open("GET", "http://115.146.93.176:8848/?city=syd&ratio=yes", false);
    xhr.send(null);
    creatXmlHttp();
    xhr.onreadystatechange = addor;
    xhr.open("GET", "http://115.146.93.176:8848/?city=bri&ratio=yes", false);
    xhr.send(null);
    creatXmlHttp();
    xhr.onreadystatechange = addor;
    xhr.open("GET", "http://115.146.93.176:8848/?city=hbt&ratio=yes", false);
    xhr.send(null);
    creatXmlHttp();
    xhr.onreadystatechange = addor;
    xhr.open("GET", "http://115.146.93.176:8848/?city=adl&ratio=yes", false);
    xhr.send(null);
    chart();
    piechart();
}

function addor(){
      if (xhr.readyState == 4) {
        if(xhr.status == 200){
            var value = xhr.responseText;
            suicide[parseInt(index)] = value;
            index++;
        }
    }
}
function creatXmlHttp()
{
    if(window.XMLHttpRequest)
         xhr = new XMLHttpRequest();
    else
         xhr = new ActiveObject("Microsoft,XMLHTTP");
}

function addMarker(lat,lon,score)
{
    var color
    if(score == 0)
    {
    marker = new google.maps.Marker({
    position: new google.maps.LatLng(lat, lon),
    icon: 'http://maps.google.com/mapfiles/ms/icons/yellow-dot.png'
    }); 
    return marker;
    }
    else
    {
        if (score > 0)
        {
            marker = new google.maps.Marker({
            position: new google.maps.LatLng(lat, lon),
            icon: 'http://maps.google.com/mapfiles/ms/icons/green-dot.png'
            }); 
            return marker;
        }
        else
        {
            marker = new google.maps.Marker({
            position: new google.maps.LatLng(lat, lon),
            icon: 'http://maps.google.com/mapfiles/ms/icons/red-dot.png'
            }); 
    return marker;
        }
    }
}
var xhr;

function creatHttp(xtt)
{
    if(window.XMLHttpRequest)
    {
         xtt = new XMLHttpRequest();
         return xtt;
    }
    else
    {
         xtt = new ActiveObject("Microsoft,XMLHTTP");
         return xtt;
    }
}

function submit1(){
    creatXmlHttp();
    xhr.onreadystatechange = change;
    xhr.open("GET", "http://115.146.93.176:8848/?city=mel&step=100", true);
    xhr.send(null);
}

function submit2(){
    creatXmlHttp();
    xhr.onreadystatechange = change;
    xhr.open("GET", "http://115.146.93.176:8848/?city=bri&step=100", true);
    xhr.send(null);
}

function submit3(){
    creatXmlHttp();
    xhr.onreadystatechange = change;
    xhr.open("GET", "http://115.146.93.176:8848/?city=syd&step=100", true);
    xhr.send(null);
}
function change() {
    if (xhr.readyState == 4) {
        if(xhr.status == 200){
            var dataset = xhr.responseText;
            var jstext = '{"tweets" :'+dataset+'}';
            object = JSON.parse(jstext);
            initialize(object);
        }
    }
}

function chart(){    var chart = new CanvasJS.Chart("chartContainer", {
      theme: "theme2",
      title:{
        text: "Unhappiness States vs \"Suicide\" occurrence in Twitter"              
      },
      data: [   
      {      
       type: "column",
       name: "Unhappiness rate",
       showInLegend: true,
       dataPoints: [
       { label: "NSW", y: parseInt(suicide[6]*100) },
       { label: "VIC", y: parseInt(suicide[5]*100) },
       { label: "QLD", y: parseInt(suicide[7]*100) },                                    
       { label: "TAS", y: parseInt(suicide[8]*100) },
       { label: "SA", y: parseInt(suicide[9]*100) }
       ]
     }, 
      {      
       type: "line",
       name: "\"Suicide\" occurrence in Twitter",
       showInLegend: true,
       dataPoints: [
       { label: "NSW", y: parseInt(suicide[0]) },
       { label: "VIC", y: parseInt(suicide[1]) },
       { label: "QLD", y: parseInt(suicide[2]) },                                    
       { label: "TAS", y: parseInt(suicide[3]) },
       { label: "SA", y: parseInt(suicide[4]) }
       ]
     }
    ],
 /** Set axisY properties here*/
    axisY:{
      prefix: "",
      suffix: "%"
    }    
  });

chart.render();
}

function piechart() {
    var chart1 = new CanvasJS.Chart("chartContainer2",
    {
        title:{
            text: "Suicide Rate in Australia from 2003 to 2007"
        },
                animationEnabled: true,
        legend:{
            verticalAlign: "center",
            horizontalAlign: "left",
            fontSize: 20,
            fontFamily: "Helvetica"        
        },
        theme: "theme2",
        data: [
        {        
            type: "pie",       
            indexLabelFontFamily: "Garamond",       
            indexLabelFontSize: 20,
            indexLabel: "{label} {y}%",
            startAngle:-20,      
            showInLegend: true,
            toolTipContent:"{legendText} {y}%",
            dataPoints: [
                {  y: 27.77, legendText:"New South Walse", label: "NSW" },
                {  y: 24.76, legendText:"Victoria", label: "VIC" },
                {  y: 21.47, legendText:"Queensland", label: "QLD" },
                {  y: 10.03, legendText:"Western Australia" , label: "WA"},       
                {  y: 9.02, legendText:"South Australia" , label: "SA"},
                {  y: 3.45, legendText:"Tasmania" , label: "TAS"},
                {  y: 2.05, legendText:"North Territory" , label: "NT"},
                {  y: 1.45, legendText:"Australian Capital Territory" , label: "ACT"}
            ]
        }
        ]
    });
    chart1.render();
}
</script>
  </head>
<!-- NAVBAR
================================================== -->
  <body onload="initialize()">
    <div class="navbar-wrapper">
      <div class="container">

        <nav class="navbar navbar-inverse navbar-static-top">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              <a class="navbar-brand" href="#">Group 30</a>
            </div>
            <div id="navbar" class="navbar-collapse collapse">
              <ul class="nav navbar-nav">
                <li class="active"><a href="index.html">Home</a></li>
                <li><a href="caseone.html">Case One</a></li>
                <li><a href="#">Case Two</a></li>
                <li><a href="casethree.html">Case Three</a></li>
                <li><a href="aboutus.html">About Us</a></li>
              </ul>
            </div>
          </div>
        </nav>

      
    


    <!-- Carousel
    ================================================== -->
    
  <div class="row">
    <div class="col-md-12">
    <div id="map_canvas" style="height:500px"></div>
    <div class="row">
  <div class="col-md-4">
    <img src="./img/suicide2.jpg" width="300" height="300" onclick="test()"></image>
  </div>
  <div>
    <h1>Suicide</h1>
    Suicide is the leading cause of death for Australians aged between 15 and 44, with around 3,000 people dying by suicide every year. That's an average of eight people every day.1 For every suicide, there are tragic ripple effects for friends, families, colleagues and the broader community.
                                                                -BeyoundBlue.org
  </div>
</div>

<div class="row">
  <div class="col-md-6">
  <div id="chartContainer" style="height: 300px;"></div>

  </div>
  <div class="col-md-6">
  <div id="chartContainer2" style="height: 300px; "></div>
  </div>
  </div>

      <!-- FOOTER -->
      <footer>
        <p class="pull-right"><a href="#">Back to top</a></p>
       
      </footer>
</div>
    </div><!-- /.container -->


    <!-- Bootstrap core JavaScript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
    <script>window.jQuery || document.write('<script src="assets/js/vendor/jquery.min.js"><\/script>')</script>
    <script src="dist/js/bootstrap.min.js"></script>
    <!-- Just to make our placeholder images work. Don't actually copy the next line! -->
    <script src="assets/js/vendor/holder.min.js"></script>
    <!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
    <script src="assets/js/ie10-viewport-bug-workaround.js"></script>
  </body>
</html>